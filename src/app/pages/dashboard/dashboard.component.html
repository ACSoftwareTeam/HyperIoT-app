<div id="dashboard-page">

    <div class="header d-flex flex-row justify-content-stretch">

        <div class="breadcrumb flex-grow-1">
            <a [routerLink]="['/']">Home</a> > <strong>Dashboard</strong>
        </div>

    </div>

    <div id="container-dashboard" [ngSwitch]="pageStatus">

        <div class="row">
            <div id="tools-dashboard-box" class="col-12 {{(pageStatus == 0)?'inLoading':''}}" *ngIf="pageStatus != -1">

                <div class="row no-gutters">

                    <div class="col-6 left-tools">

                        <div id="signal-btn" (click)="changeSignalState($event)">
                            <span
                                class="hyt-icon {{(signalIsOn)?'icon-hyt_wifiOnFilled':'icon-hyt_wifiOffFilled'}}"></span>
                            <p i18n="@@HYT_signal_is_on">HYT_signal_is_on</p>
                        </div>


                        <div *ngIf="signalIsOn" id="play-btn" (click)="changeStreamState($event)">
                            <span class="hyt-icon {{(streamIsOn)?'icon-hyt_play':'icon-hyt_pause'}}"></span>
                            <p i18n="@@HYT_stream_is_on">HYT_stream_is_on</p>
                        </div>

                        <hyt-topology-toolbar
                            [dataRecordingIsOn]="dataRecordingIsOn"
                            [upTimeSec]="upTimeSec"
                            [idProjectSelected]="idProjectSelected"
                            [recordStateInLoading]="recordStateInLoading">
                        </hyt-topology-toolbar>

                    </div>

                    <div class="col-6 right-tools">

                        <hyt-select *ngIf="pageStatus == 1" [label]="'Select a project'" name="project"
                            [options]="hProjectListOptions" [selected]="idProjectSelected"
                            (changeFn)="onSelectChange($event)" [disabled]="false"></hyt-select>

                        <div id="add-widget-btn" *ngIf="pageStatus == PageStatus.Standard"
                            (click)="openModal('hyt-modal-add-widgets')">
                            <span class="hyt-icon icon-hyt_widgetPlus"></span>
                            <p i18n="@@HYT_add_a_widget">HYT_add_a_widget</p>
                        </div>

                    </div>

                </div>

            </div>
        </div>

        <!-- <hyt-timeline></hyt-timeline> -->

        <div id="loadingStatus" *ngSwitchCase="PageStatus.Loading"
            class="row align-items-center justify-content-center">
            <div class="mt-5 d-flex flex-column">
                <h2 i18n="@@HYT_page_is_loading">HYT_page_is_loading</h2>
            </div>
        </div>

        <div id="standardStatus" *ngSwitchCase="PageStatus.Standard" class="row">
            <!-- Standard -->
            <div *ngIf="!dataRecordingIsOn && signalIsOn && !recordStateInLoading" id="dashboard-overlay-blurred" class="row no-gutters justify-content-center">

                <div class="col-md-4">
                    <h2 id="overlay-blurred-title">Data recording is disabled</h2>
                    <!--@I18N-->
                    <h3 id="overlay-blurred-text">
                        The online dashboard cannot be used in this state.
                        You can activate data recording by pressing the "RUN" button
                        or you can use the dasboard offline taking the "OFFLINE" button.
                    </h3>
                    <!--@I18N-->
                </div>

            </div>

            <div id="container-box-dashboard" class="col-12 {{(!dataRecordingIsOn && signalIsOn) ? 'blurred-animation' : ''}}">

                <hyt-dashboard-view 
                    [dashboard]="currentDashboard" 
                    [dashboardType]="currentDashboardType"
                    [dashboardWidgets]="currentDashboard.widgets"
                >
                </hyt-dashboard-view>

            </div>

        </div>

        <div id="newStatus" *ngSwitchCase="PageStatus.New" class="row align-items-center justify-content-center">
            <!-- New -->
            <div class="mt-5 no-dashboards">

                <div id="content-no-dashboards" class="col-md-12">
                    <i class="fa fa-bar-chart-o"></i>
                    <h3 id="title-no-dashboards" i18n="@@HYT_no_dashboard_yet">HYT_no_dashboard_yet</h3>
                    <!-- <h4 id="subtitle-no-dashboards">Start adding widgets.</h4> -->
                </div>

                <!-- <hyt-dashboard-view [dashboard]="currentDashboard"></hyt-dashboard-view> -->

            </div> <!-- End No Projects Row -->

        </div>

        <div id="errorStatus" *ngSwitchCase="PageStatus.Error" class="row align-items-center justify-content-center">
            <div class="mt-5 d-flex flex-column align-items-center justify-content-center">
                <h2 i18n="@@HYT_error_occurred_long">HYT_error_occurred_long</h2>
            </div>
        </div>

        <div *ngSwitchDefault>
            switch-case error
        </div>

    </div>

</div>
