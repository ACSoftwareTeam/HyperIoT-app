<!-- Main areas list -->
<div *ngIf="!editMode" class="content">

    <div class="overview">
        Lorem ipsum dolor sit amet, consectetur adipisci elit, sed do eiusmod tempor incidunt ut labore et dolore magna
        aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullamco laboriosam, nisi ut aliquid ex ea commodi
        consequatur. Duis aute irure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
        sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum
        <!--@I18N@-->
    </div>

    <div class="actions">
        <hyt-button 
            mat-mini-fab 
            [color]="'hyt-base-default-white'"
            [routerLink]="[ '/projects/', projectId, {outlets: { projectDetails: ['areas', 0 ] } } ]">
            Add area <span class="hyt-icon icon-hyt_plusC"></span>
        </hyt-button>
        <!--@I18N@-->
    </div>
    
    <div class="d-flex flex-row flex-wrap">
        <mat-card *ngFor="let area of areaList"
            class="area-item mat-elevation-z2"
            [routerLink]="[area.id]">
            <mat-card-header>
                <mat-card-title>{{area.name}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>{{area.description}}</mat-card-content>
        </mat-card>
    </div>

</div>

<!-- Area detail form -->
<div [ngClass]="{ hidden: !editMode }" class="content">

    <div class="current-path">
        <label>PATH:</label>
        <a [routerLink]="[ '/projects/', projectId, {outlets: { projectDetails: ['areas'] } } ]">Main</a>
        <span *ngFor="let area of areaPath; let i = index; let c = count">
            &nbsp;&gt;&nbsp;
            <a *ngIf="i < c - 1" [routerLink]="[ '/projects/', projectId, {outlets: { projectDetails: ['areas', area.id ] } } ]">{{area.name}}</a>    
            <span *ngIf="i === c - 1">{{area.name}}</span>
        </span>
    </div>

    <mat-tab-group [(selectedIndex)]="currentSection">

        <mat-tab [label]="areaId === 0 ? 'New area' : 'Info'">
            <form [formGroup]="form" enctype="multipart/form-data" class="mt-4 d-flex flex-column justify-content-center">

                <hyt-input-text [form]="form"
                    name="area-name"
                    i18n-placeholder="@@HYT_name"
                    placeholder="HYT_name"
                    errorPosition="bottom"
                    minlength="3"
                    [injectedErrorMsg]="getError('area-name')"
                    i18n-hintMessage="@@HYT_hint_area_name"
                    hintMessage="HYT_hint_area_name"
                    [isRequired]="true"></hyt-input-text>
                
                <hyt-text-area [form]="form"
                    name="area-description"
                    [injectedErrorMsg]="getError('area-description')"
                    i18n-hintMessage="@@HYT_hint_area_description"
                    hintMessage="HYT_hint_area_description"
                    i18n-placeholder="@@HYT_description"
                    placeholder="HYT_description"></hyt-text-area>
        
            </form>                    
        </mat-tab>

        <mat-tab *ngIf="areaId > 0" label="Map">
            <div class="mt-4">

                <input
                    name="area-image"
                    (change)="onFileChange($event)"
                    type="file" placeholder="Upload file" accept=".jpg,.png,.svg">

                <hyt-area-map></hyt-area-map>

            </div>
        </mat-tab>

        <mat-tab *ngIf="areaId > 0" label="Inner areas ({{ areaList.length }})">
            <div class="actions">
                <hyt-button mat-mini-fab (clickFn)="onAddSubAreaClick($event)">
                    Add inner area <span class="hyt-icon icon-hyt_plusC"></span>
                </hyt-button>
            </div>
            <div class="mt-4 mb-4 d-flex flex-row flex-wrap">
                <mat-card *ngFor="let area of areaList"
                    class="area-item mat-elevation-z2"
                    [routerLink]="[ '/projects/', projectId, {outlets: { projectDetails: ['areas', area.id ] } } ]">
                    <mat-card-header>
                        <mat-card-title>{{area.name}}</mat-card-title>
                    </mat-card-header>
                    <mat-card-content>{{area.description}}</mat-card-content>
                </mat-card>
            </div>
        </mat-tab>

    </mat-tab-group>

</div>


    <!-- 
        TODO: This HTML block is repeated
        across all 'entity' components,
        consider making a component out of it 
    -->

    <div *ngIf="loadingStatus !== LoadingStatus.Ready" class="overlay d-flex flex-column align-items-center justify-content-center">
        
        <div *ngIf="loadingStatus === LoadingStatus.Loading">

            <h4 i18n="@@HYT_loading_data">HYT_loading_data</h4>

        </div> 
        
        <div *ngIf="loadingStatus === LoadingStatus.Error" class="error-overlay d-flex flex-column justify-content-center">
            <h4 i18n="@@HYT_error_occurred">HYT_error_occurred</h4>

            <hyt-button 
                [color]="'hyt-base-default-white'" 
                (click)="loadingStatus = LoadingStatus.Ready"
            >
                <span i18n="@@HYT_close">HYT_close</span> <span class="icon-hyt_cancelC"></span> 
            </hyt-button>
        </div>

        <h4 *ngIf="loadingStatus === LoadingStatus.Saving" i18n="@@HYT_saving_data">HYT_saving_data</h4>

        <mat-progress-bar 
            *ngIf="loadingStatus === LoadingStatus.Loading || loadingStatus === LoadingStatus.Saving"
            mode="indeterminate"
        ></mat-progress-bar> 

    </div>