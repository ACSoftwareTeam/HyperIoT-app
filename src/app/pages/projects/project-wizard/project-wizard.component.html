<div id="container-project-wizard">

  <div class="header d-flex flex-row justify-content-stretch">

    <div class="breadcrumb flex-grow-1">
      <span class="hyt-icon icon-hyt_projectSolo"></span> <a [routerLink]="['/']">Home</a> > <strong>Projects
        Wizard</strong>
    </div>

  </div>

  <div id="container-steps" class="row">

    <ng-template #projectTemplate>
      <hyt-project-step (projectOutput)="updateProject($event)">
      </hyt-project-step>
    </ng-template>

    <ng-template #devicesTemplate>
      <hyt-devices-step></hyt-devices-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button [isDisabled]="!devicesValidated" (clickFn)="stepper.next()">Next</hyt-button>
    </ng-template>

    <ng-template #packetsTemplate>
      <hyt-packets-step></hyt-packets-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button [isDisabled]="!packetsValidated" (clickFn)="stepper.next()">Next</hyt-button>
    </ng-template>

    <ng-template #fieldsTemplate>
      <hyt-fields-step></hyt-fields-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button
        (clickFn)="(fieldsValidated == true && enrichmentValidated == false)? openOptionModal() : stepper.next()">Next
      </hyt-button>
    </ng-template>

    <ng-template #enrichmentTemplate>
      <hyt-enrichment-step></hyt-enrichment-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button (clickFn)="stepper.next()">Next</hyt-button>
    </ng-template>

    <ng-template #statisticsTemplate>
      <hyt-statistics-step></hyt-statistics-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button (clickFn)="stepper.next()">Next</hyt-button>
    </ng-template>

    <ng-template #eventsTemplate>
      <hyt-events-step></hyt-events-step>
      <hyt-button (clickFn)="stepper.previous()">Back</hyt-button>
      <hyt-button (clickFn)="openOptionModal()">Next</hyt-button>
    </ng-template>


    <hyt-stepper #stepper (selectionChange)="stepChanged($event)" [isLinear]="true" style="width: 100%"
      [stepArray]="[ projectTemplate, devicesTemplate, packetsTemplate, fieldsTemplate, enrichmentTemplate, statisticsTemplate, eventsTemplate ]"
      [labelArray]="[ 'Projects', 'Devices', 'Packets', 'Fields', 'Enrichment', 'Statistics', 'Events' ]"
      [completedArray]="[ projectValidated, devicesValidated, packetsValidated, fieldsValidated, enrichmentValidated, statisticsValidated, eventsValidated ]">
    </hyt-stepper>

    <hyt-modal id="optionsModal" [mOpen]="ovpOpen">
      <div class="center">
        <div class="row">
          <div class="col-md-12">
            Choose how to proceed
            <button (click)="closeOptionModal()">X</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <img src="assets/projects/icons/monitor.png" (click)="goToStepByIndex(4)">
            <br>
            <b>Enrichment data</b>
            <br>
            Sed eu imperdiet mauris. Nullam iaculis leo eget justo sodales sagittis. Morbi purus lorem, luctus id lectus
            ac, pulvinar fermentum nisl. Nulla sit amet accumsan libero, vitae molestie velit. Nulla non pretium magna,
            et pulvinar felis. Fusce semper augue at odio ornare, sit amet pharetra tellus scelerisque. Cras sed
            accumsan libero. Aliquam sed congue diam. Donec imperdiet faucibus risus sit amet mattis. Ut auctor mattis
            mauris.
          </div>
          <div class="col-md-4">
            <img src="assets/projects/icons/monitor.png" (click)="goToStepByIndex(5)">
            <br>
            <b>Statistic</b>
            <br>
            Morbi tincidunt eget augue vitae iaculis. Mauris sed sapien fringilla, scelerisque urna consectetur, aliquam
            erat. Curabitur rhoncus, tellus eu feugiat dictum, elit leo tincidunt arcu, sed tristique mauris nisi
            fermentum dui. Ut elementum, libero ac vehicula pretium, quam nunc pulvinar est, vitae sagittis metus leo
            eleifend ex. Sed id aliquam risus. Vestibulum at mi ac nisl ullamcorper sagittis at at erat. Nam ut mi
            convallis eros dictum faucibus ac et mauris. Vestibulum vulputate felis ut semper ullamcorper
          </div>
          <div class="col-md-4">
            <img src="assets/projects/icons/monitor.png" (click)="goToStepByIndex(6)">
            <br>
            <b>Events</b>
            <br>
            Sed magna mi, ultricies et dignissim a, sagittis elementum ligula. Proin tempus, justo non venenatis
            molestie, ligula mi pretium odio, varius fringilla nisi mauris a massa. Fusce tempor lectus in laoreet
            convallis. Nulla non felis nec diam pulvinar mattis. Mauris feugiat feugiat ultrices. Suspendisse potenti.
            Praesent fringilla felis ut risus tristique, ut ullamcorper massa malesuada. Ut volutpat aliquam turpis
            vitae porttitor. Suspendisse dapibus lobortis purus, id egestas mauris porttitor ac.
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="col-md-12">
            <hyt-button (clickFn)="openFinishModal()">Finish</hyt-button>
          </div>
        </div>
      </div>
    </hyt-modal>

    <hyt-modal [mOpen]="finishOpen">
      <div class="center">
        <div class="row">
          <div class="col-md-12">
            Congratulations
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            You have finished configuring your project
            <div class="row">
              <div class="col-md-6">
                <table id="tableSummary">
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Projects
                      <hr>{{(hProject)?hProject.name:''}}</td>
                  </tr>
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Devices
                      <hr>
                      <ul>
                        <!-- <li *ngFor="let el of hDevices">{{el.deviceName}}</li>TODO -->
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Packets
                      <hr>
                      <ul>
                        <li *ngFor="let el of hPackets">{{el.name}}</li>
                      </ul>
                    </td>
                  </tr>
                  <!-- <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Fields<hr><ul><li *ngFor="el of hPackets">el.name</li></ul></td>
                  </tr> -->
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Enrichment
                      <hr>
                      <ul>
                        <li *ngFor="let el of rules">{{el.name}}</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Statistics
                      <hr>
                    </td>
                  </tr>
                  <tr>
                    <td><img src="assets/projects/icons/monitor.png"></td>
                    <td>Events
                      <hr>
                      <ul>
                        <li *ngFor="let el of events">{{el.name}}</li>
                      </ul>
                    </td>
                  </tr>
                </table>
              </div>
              <div class="col-md-3">
                <img src="assets/projects/icons/monitor.png" (click)="goToProjectWizard()">
                <br>
                <b>Go To Project List</b>
                <br>
                Morbi tincidunt eget augue vitae iaculis. Mauris sed sapien fringilla, scelerisque urna consectetur,
                aliquam
                erat. Curabitur rhoncus, tellus eu feugiat dictum, elit leo tincidunt arcu, sed tristique mauris nisi
                fermentum dui. Ut elementum, libero ac vehicula pretium, quam nunc pulvinar est, vitae sagittis metus
                leo
                eleifend ex. Sed id aliquam risus. Vestibulum at mi ac nisl ullamcorper sagittis at at erat. Nam ut mi
                convallis eros dictum faucibus ac et mauris. Vestibulum vulputate felis ut semper ullamcorper
              </div>
              <div class="col-md-3">
                <img src="assets/projects/icons/monitor.png" (click)="goToDashboard()">
                <br>
                <b>Go To Dashboard</b>
                <br>
                Sed magna mi, ultricies et dignissim a, sagittis elementum ligula. Proin tempus, justo non venenatis
                molestie, ligula mi pretium odio, varius fringilla nisi mauris a massa. Fusce tempor lectus in laoreet
                convallis. Nulla non felis nec diam pulvinar mattis. Mauris feugiat feugiat ultrices. Suspendisse
                potenti.
                Praesent fringilla felis ut risus tristique, ut ullamcorper massa malesuada. Ut volutpat aliquam turpis
                vitae porttitor. Suspendisse dapibus lobortis purus, id egestas mauris porttitor ac.
              </div>
            </div>
          </div>
        </div>
      </div>
    </hyt-modal>

    <hyt-modal [mOpen]="deactivateModal">
      <div class="center">
        Se esci dalla pagina perderai tutte le modifiche non salvate
        <br>
        <br>
        <hyt-button (clickFn)="deactivate(true)">OK</hyt-button>
        <hyt-button (clickFn)="deactivate(false)">ANNULLA</hyt-button>
      </div>
    </hyt-modal>

  </div>
</div>
